"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/calculate-medals";
exports.ids = ["pages/api/calculate-medals"];
exports.modules = {

/***/ "google-auth-library":
/*!**************************************!*\
  !*** external "google-auth-library" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("google-auth-library");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "google-spreadsheet":
/*!*************************************!*\
  !*** external "google-spreadsheet" ***!
  \*************************************/
/***/ ((module) => {

module.exports = import("google-spreadsheet");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcalculate-medals&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcalculate-medals.ts&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcalculate-medals&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcalculate-medals.ts&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_calculate_medals_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/calculate-medals.ts */ \"(api)/./pages/api/calculate-medals.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_calculate_medals_ts__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_calculate_medals_ts__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_calculate_medals_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_calculate_medals_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/calculate-medals\",\n        pathname: \"/api/calculate-medals\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_calculate_medals_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmNhbGN1bGF0ZS1tZWRhbHMmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmNhbGN1bGF0ZS1tZWRhbHMudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDNEQ7QUFDNUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDJEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywyREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90d3N0X21jX2NhbGMvP2NiNWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9jYWxjdWxhdGUtbWVkYWxzLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvY2FsY3VsYXRlLW1lZGFsc1wiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NhbGN1bGF0ZS1tZWRhbHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcalculate-medals&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcalculate-medals.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/googleSheets.ts":
/*!*****************************!*\
  !*** ./lib/googleSheets.ts ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSheetData: () => (/* binding */ getSheetData)\n/* harmony export */ });\n/* harmony import */ var google_spreadsheet__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! google-spreadsheet */ \"google-spreadsheet\");\n/* harmony import */ var google_auth_library__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! google-auth-library */ \"google-auth-library\");\n/* harmony import */ var google_auth_library__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(google_auth_library__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([google_spreadsheet__WEBPACK_IMPORTED_MODULE_0__]);\ngoogle_spreadsheet__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\nconst SPREADSHEET_ID = process.env.GOOGLE_SPREADSHEET_ID;\nconst GOOGLE_CLIENT_EMAIL = process.env.GOOGLE_CLIENT_EMAIL;\nconst GOOGLE_PRIVATE_KEY = process.env.GOOGLE_PRIVATE_KEY ? process.env.GOOGLE_PRIVATE_KEY.replace(/\\\\n/g, \"\\n\").replace(/\"/g, \"\") : undefined;\nif (!SPREADSHEET_ID || !GOOGLE_CLIENT_EMAIL || !GOOGLE_PRIVATE_KEY) {\n    console.error(\"Missing Google Sheets credentials\");\n    throw new Error(\"Missing Google Sheets credentials\");\n}\nconst serviceAccountAuth = new google_auth_library__WEBPACK_IMPORTED_MODULE_1__.JWT({\n    email: GOOGLE_CLIENT_EMAIL,\n    key: GOOGLE_PRIVATE_KEY,\n    scopes: [\n        \"https://www.googleapis.com/auth/spreadsheets.readonly\"\n    ]\n});\nconst doc = new google_spreadsheet__WEBPACK_IMPORTED_MODULE_0__.GoogleSpreadsheet(SPREADSHEET_ID, serviceAccountAuth);\nasync function getSheetData(sheetTitle) {\n    try {\n        console.log(`Loading sheet: ${sheetTitle}`);\n        await doc.loadInfo();\n        const sheet = doc.sheetsByTitle[sheetTitle];\n        if (!sheet) {\n            console.error(`Sheet not found: ${sheetTitle}`);\n            throw new Error(`Sheet not found: ${sheetTitle}`);\n        }\n        console.log(`Fetching rows from sheet: ${sheetTitle}`);\n        const rows = await sheet.getRows();\n        console.log(`Fetched ${rows.length} rows from sheet: ${sheetTitle}`);\n        return rows.map((row)=>row.toObject());\n    } catch (error) {\n        console.error(`Error fetching data from sheet ${sheetTitle}:`, error);\n        throw error;\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvZ29vZ2xlU2hlZXRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBdUQ7QUFDYjtBQUUxQyxNQUFNRSxpQkFBaUJDLFFBQVFDLEdBQUcsQ0FBQ0MscUJBQXFCO0FBQ3hELE1BQU1DLHNCQUFzQkgsUUFBUUMsR0FBRyxDQUFDRSxtQkFBbUI7QUFDM0QsTUFBTUMscUJBQXFCSixRQUFRQyxHQUFHLENBQUNHLGtCQUFrQixHQUNyREosUUFBUUMsR0FBRyxDQUFDRyxrQkFBa0IsQ0FBQ0MsT0FBTyxDQUFDLFFBQVEsTUFBTUEsT0FBTyxDQUFDLE1BQU0sTUFDbkVDO0FBRUosSUFBSSxDQUFDUCxrQkFBa0IsQ0FBQ0ksdUJBQXVCLENBQUNDLG9CQUFvQjtJQUNsRUcsUUFBUUMsS0FBSyxDQUFDO0lBQ2QsTUFBTSxJQUFJQyxNQUFNO0FBQ2xCO0FBRUEsTUFBTUMscUJBQXFCLElBQUlaLG9EQUFHQSxDQUFDO0lBQ2pDYSxPQUFPUjtJQUNQUyxLQUFLUjtJQUNMUyxRQUFRO1FBQ047S0FDRDtBQUNIO0FBRUEsTUFBTUMsTUFBTSxJQUFJakIsaUVBQWlCQSxDQUFDRSxnQkFBZ0JXO0FBRTNDLGVBQWVLLGFBQWFDLFVBQWtCO0lBQ25ELElBQUk7UUFDRlQsUUFBUVUsR0FBRyxDQUFDLENBQUMsZUFBZSxFQUFFRCxXQUFXLENBQUM7UUFDMUMsTUFBTUYsSUFBSUksUUFBUTtRQUNsQixNQUFNQyxRQUFRTCxJQUFJTSxhQUFhLENBQUNKLFdBQVc7UUFDM0MsSUFBSSxDQUFDRyxPQUFPO1lBQ1ZaLFFBQVFDLEtBQUssQ0FBQyxDQUFDLGlCQUFpQixFQUFFUSxXQUFXLENBQUM7WUFDOUMsTUFBTSxJQUFJUCxNQUFNLENBQUMsaUJBQWlCLEVBQUVPLFdBQVcsQ0FBQztRQUNsRDtRQUNBVCxRQUFRVSxHQUFHLENBQUMsQ0FBQywwQkFBMEIsRUFBRUQsV0FBVyxDQUFDO1FBQ3JELE1BQU1LLE9BQU8sTUFBTUYsTUFBTUcsT0FBTztRQUNoQ2YsUUFBUVUsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFSSxLQUFLRSxNQUFNLENBQUMsa0JBQWtCLEVBQUVQLFdBQVcsQ0FBQztRQUNuRSxPQUFPSyxLQUFLRyxHQUFHLENBQUNDLENBQUFBLE1BQU9BLElBQUlDLFFBQVE7SUFDckMsRUFBRSxPQUFPbEIsT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUMsQ0FBQywrQkFBK0IsRUFBRVEsV0FBVyxDQUFDLENBQUMsRUFBRVI7UUFDL0QsTUFBTUE7SUFDUjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdHdzdF9tY19jYWxjLy4vbGliL2dvb2dsZVNoZWV0cy50cz9iNzgwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEdvb2dsZVNwcmVhZHNoZWV0IH0gZnJvbSAnZ29vZ2xlLXNwcmVhZHNoZWV0JztcbmltcG9ydCB7IEpXVCB9IGZyb20gJ2dvb2dsZS1hdXRoLWxpYnJhcnknO1xuXG5jb25zdCBTUFJFQURTSEVFVF9JRCA9IHByb2Nlc3MuZW52LkdPT0dMRV9TUFJFQURTSEVFVF9JRDtcbmNvbnN0IEdPT0dMRV9DTElFTlRfRU1BSUwgPSBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX0VNQUlMO1xuY29uc3QgR09PR0xFX1BSSVZBVEVfS0VZID0gcHJvY2Vzcy5lbnYuR09PR0xFX1BSSVZBVEVfS0VZIFxuICA/IHByb2Nlc3MuZW52LkdPT0dMRV9QUklWQVRFX0tFWS5yZXBsYWNlKC9cXFxcbi9nLCAnXFxuJykucmVwbGFjZSgvXCIvZywgJycpXG4gIDogdW5kZWZpbmVkO1xuXG5pZiAoIVNQUkVBRFNIRUVUX0lEIHx8ICFHT09HTEVfQ0xJRU5UX0VNQUlMIHx8ICFHT09HTEVfUFJJVkFURV9LRVkpIHtcbiAgY29uc29sZS5lcnJvcignTWlzc2luZyBHb29nbGUgU2hlZXRzIGNyZWRlbnRpYWxzJyk7XG4gIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBHb29nbGUgU2hlZXRzIGNyZWRlbnRpYWxzJyk7XG59XG5cbmNvbnN0IHNlcnZpY2VBY2NvdW50QXV0aCA9IG5ldyBKV1Qoe1xuICBlbWFpbDogR09PR0xFX0NMSUVOVF9FTUFJTCxcbiAga2V5OiBHT09HTEVfUFJJVkFURV9LRVksXG4gIHNjb3BlczogW1xuICAgICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9hdXRoL3NwcmVhZHNoZWV0cy5yZWFkb25seScsXG4gIF0sXG59KTtcblxuY29uc3QgZG9jID0gbmV3IEdvb2dsZVNwcmVhZHNoZWV0KFNQUkVBRFNIRUVUX0lELCBzZXJ2aWNlQWNjb3VudEF1dGgpO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2hlZXREYXRhKHNoZWV0VGl0bGU6IHN0cmluZykge1xuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKGBMb2FkaW5nIHNoZWV0OiAke3NoZWV0VGl0bGV9YCk7XG4gICAgYXdhaXQgZG9jLmxvYWRJbmZvKCk7XG4gICAgY29uc3Qgc2hlZXQgPSBkb2Muc2hlZXRzQnlUaXRsZVtzaGVldFRpdGxlXTtcbiAgICBpZiAoIXNoZWV0KSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBTaGVldCBub3QgZm91bmQ6ICR7c2hlZXRUaXRsZX1gKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgU2hlZXQgbm90IGZvdW5kOiAke3NoZWV0VGl0bGV9YCk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGBGZXRjaGluZyByb3dzIGZyb20gc2hlZXQ6ICR7c2hlZXRUaXRsZX1gKTtcbiAgICBjb25zdCByb3dzID0gYXdhaXQgc2hlZXQuZ2V0Um93cygpO1xuICAgIGNvbnNvbGUubG9nKGBGZXRjaGVkICR7cm93cy5sZW5ndGh9IHJvd3MgZnJvbSBzaGVldDogJHtzaGVldFRpdGxlfWApO1xuICAgIHJldHVybiByb3dzLm1hcChyb3cgPT4gcm93LnRvT2JqZWN0KCkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGZldGNoaW5nIGRhdGEgZnJvbSBzaGVldCAke3NoZWV0VGl0bGV9OmAsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIkdvb2dsZVNwcmVhZHNoZWV0IiwiSldUIiwiU1BSRUFEU0hFRVRfSUQiLCJwcm9jZXNzIiwiZW52IiwiR09PR0xFX1NQUkVBRFNIRUVUX0lEIiwiR09PR0xFX0NMSUVOVF9FTUFJTCIsIkdPT0dMRV9QUklWQVRFX0tFWSIsInJlcGxhY2UiLCJ1bmRlZmluZWQiLCJjb25zb2xlIiwiZXJyb3IiLCJFcnJvciIsInNlcnZpY2VBY2NvdW50QXV0aCIsImVtYWlsIiwia2V5Iiwic2NvcGVzIiwiZG9jIiwiZ2V0U2hlZXREYXRhIiwic2hlZXRUaXRsZSIsImxvZyIsImxvYWRJbmZvIiwic2hlZXQiLCJzaGVldHNCeVRpdGxlIiwicm93cyIsImdldFJvd3MiLCJsZW5ndGgiLCJtYXAiLCJyb3ciLCJ0b09iamVjdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/googleSheets.ts\n");

/***/ }),

/***/ "(api)/./pages/api/calculate-medals.ts":
/*!***************************************!*\
  !*** ./pages/api/calculate-medals.ts ***!
  \***************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_googleSheets__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/googleSheets */ \"(api)/./lib/googleSheets.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_lib_googleSheets__WEBPACK_IMPORTED_MODULE_0__]);\n_lib_googleSheets__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\nconst qualityPoints = {\n    high: 30,\n    medium: 20,\n    low: 10\n};\n// strictnessの数値を評価タイプに変換する関数\nfunction getJudgeType(strictness) {\n    switch(strictness){\n        case 1:\n            return \"generous\";\n        case 2:\n            return \"slightly_generous\";\n        case 3:\n            return \"normal\";\n        case 4:\n            return \"strict\";\n        default:\n            return \"normal\";\n    }\n}\n// judges配列を動的に生成する関数\nasync function getJudges() {\n    try {\n        const judgeConfigs = await (0,_lib_googleSheets__WEBPACK_IMPORTED_MODULE_0__.getSheetData)(\"Judges\");\n        const judges = [];\n        for (const config of judgeConfigs){\n            const count = parseInt(config.number.toString());\n            const strictness = parseInt(config.strictness.toString());\n            if (isNaN(count) || isNaN(strictness)) continue;\n            const judgeType = getJudgeType(strictness);\n            const judge = {\n                type: judgeType,\n                evaluate: (avg)=>{\n                    switch(judgeType){\n                        case \"generous\":\n                            if (avg >= 16) return 10;\n                            if (avg === 15) return 9;\n                            if (avg >= 11) return 8;\n                            if (avg === 10) return 7;\n                            return 3;\n                        case \"slightly_generous\":\n                            if (avg >= 20) return 10;\n                            if (avg >= 16) return 9;\n                            if (avg === 15) return 8;\n                            if (avg >= 11) return 7;\n                            if (avg === 10) return 6;\n                            return 3;\n                        case \"normal\":\n                            if (avg >= 21) return 10;\n                            if (avg === 20) return 9;\n                            if (avg >= 16) return 8;\n                            if (avg === 15) return 7;\n                            if (avg >= 11) return 6;\n                            if (avg === 10) return 5;\n                            return 3;\n                        case \"strict\":\n                            if (avg >= 26) return 10;\n                            if (avg === 25) return 9;\n                            if (avg >= 21) return 8;\n                            if (avg === 20) return 7;\n                            if (avg >= 16) return 6;\n                            if (avg === 15) return 5;\n                            if (avg >= 11) return 4;\n                            if (avg === 10) return 3;\n                            return 3;\n                        default:\n                            return 3;\n                    }\n                }\n            };\n            // 指定された数だけjudgeを追加\n            for(let i = 0; i < count; i++){\n                judges.push(judge);\n            }\n        }\n        console.log(\"Loaded judges:\", judges.map((j)=>j.type));\n        return judges;\n    } catch (error) {\n        console.error(\"Error loading judges:\", error);\n        throw error;\n    }\n}\n// APIハンドラーを非同期関数に変更\nasync function handler(req, res) {\n    if (req.method === \"POST\") {\n        try {\n            const { stock, recipes } = req.body;\n            console.log(\"Received request:\", JSON.stringify({\n                stock,\n                recipes\n            }, null, 2));\n            if (!stock || !recipes || !Array.isArray(recipes)) {\n                throw new Error(\"Invalid input data\");\n            }\n            // 審査員の構成を読み込む\n            const judges = await getJudges();\n            // レシピの ingredients を解析\n            const parsedRecipes = recipes.map((recipe)=>({\n                    ...recipe,\n                    ingredients: JSON.parse(recipe.ingredients),\n                    madols: parseInt(recipe.madols)\n                }));\n            const result = calculateOptimalRecipes(stock, parsedRecipes, judges);\n            console.log(\"Calculation result:\", JSON.stringify(result, null, 2));\n            res.status(200).json(result);\n        } catch (error) {\n            console.error(\"Error in calculate-medals:\", error);\n            res.status(500).json({\n                error: \"Internal Server Error\",\n                details: error instanceof Error ? error.message : \"Unknown error\"\n            });\n        }\n    } else {\n        res.status(405).end();\n    }\n}\n// calculateOptimalRecipes関数を修正して judges を引数として受け取る\nfunction calculateOptimalRecipes(stock, recipes, judges) {\n    let optimalRecipes = {};\n    let totalMedals = 0;\n    let totalMadols = 0;\n    let charcoalDetails = [];\n    let recipeDetails = [];\n    let currentStock = JSON.parse(JSON.stringify(stock));\n    while(true){\n        let bestRecipe = null;\n        let bestMedals = 0;\n        let bestUsedMaterials = null;\n        // 通常のシピを試す\n        for (const recipe of recipes){\n            if (canMake(currentStock, recipe.ingredients)) {\n                // 各レシピに対して、低品質優先と高品質優先の両方を試す\n                const lowQualityFirst = simulateRecipe(currentStock, recipe, true, judges);\n                const highQualityFirst = simulateRecipe(currentStock, recipe, false, judges);\n                // より多くのメダルが獲得できる方を選択\n                if (lowQualityFirst.medals > bestMedals) {\n                    bestMedals = lowQualityFirst.medals;\n                    bestRecipe = recipe;\n                    bestUsedMaterials = lowQualityFirst.materials;\n                }\n                if (highQualityFirst.medals > bestMedals) {\n                    bestMedals = highQualityFirst.medals;\n                    bestRecipe = recipe;\n                    bestUsedMaterials = highQualityFirst.materials;\n                }\n            }\n        }\n        // レシピが見つからない場合は炭を作る処理（既存のコド）\n        if (bestRecipe === null) {\n            const charcoalResult = tryMakeCharcoal(currentStock);\n            if (charcoalResult) {\n                console.log(\"Making charcoal with remaining materials\");\n                optimalRecipes[\"炭\"] = (optimalRecipes[\"炭\"] || 0) + charcoalResult.combinations[0].count;\n                totalMedals += 3 * charcoalResult.combinations[0].count;\n                totalMadols += 350 * charcoalResult.combinations[0].count;\n                charcoalDetails.push(...charcoalResult.combinations);\n                useIngredients(currentStock, charcoalResult.usedIngredients);\n                continue;\n            }\n            break;\n        }\n        // 選択されたレシピの実行\n        if (bestUsedMaterials) {\n            // 使用する材料を在庫から減らす\n            for (const material of bestUsedMaterials){\n                const materialStock = currentStock[material.materialCode];\n                if (materialStock) {\n                    materialStock.high -= material.high;\n                    materialStock.medium -= material.medium;\n                    materialStock.low -= material.low;\n                }\n            }\n            recipeDetails.push({\n                recipeName: bestRecipe.name,\n                count: 1,\n                materials: bestUsedMaterials,\n                medals: bestMedals,\n                madols: bestRecipe.madols\n            });\n            optimalRecipes[bestRecipe.name] = (optimalRecipes[bestRecipe.name] || 0) + 1;\n            totalMedals += bestMedals;\n            totalMadols += bestRecipe.madols;\n        }\n    }\n    return {\n        recipes: optimalRecipes,\n        medals: totalMedals,\n        madols: totalMadols,\n        charcoalDetails: charcoalDetails.length > 0 ? charcoalDetails : undefined,\n        recipeDetails\n    };\n}\n// simulateRecipe関数を修正して judges を引数として受け取る\nfunction simulateRecipe(stock, recipe, lowQualityFirst, judges) {\n    const tempStock = JSON.parse(JSON.stringify(stock));\n    const usedMaterials = [];\n    let totalPoints = 0;\n    let totalIngredients = 0;\n    for(const materialCode in recipe.ingredients){\n        const requiredAmount = recipe.ingredients[materialCode];\n        if (requiredAmount > 0) {\n            const materialStock = tempStock[materialCode];\n            const detail = {\n                materialCode,\n                high: 0,\n                medium: 0,\n                low: 0\n            };\n            let remainingAmount = requiredAmount;\n            const qualities = lowQualityFirst ? [\n                \"low\",\n                \"medium\",\n                \"high\"\n            ] : [\n                \"high\",\n                \"medium\",\n                \"low\"\n            ];\n            for (const quality of qualities){\n                const availableQuantity = materialStock[quality];\n                const usedQuantity = Math.min(availableQuantity, remainingAmount);\n                detail[quality] = usedQuantity;\n                totalPoints += qualityPoints[quality] * usedQuantity;\n                remainingAmount -= usedQuantity;\n                if (remainingAmount <= 0) break;\n            }\n            totalIngredients += requiredAmount;\n            usedMaterials.push(detail);\n        }\n    }\n    const averagePoints = Math.floor(totalPoints / totalIngredients);\n    const allJudgesPoints = judges.map((judge)=>judge.evaluate(averagePoints));\n    const totalScore = allJudgesPoints.reduce((sum, points)=>sum + points, 0);\n    const medals = Math.max(Math.floor(totalScore * 30 / 100), 3);\n    return {\n        medals,\n        materials: usedMaterials\n    };\n}\n// 炭を作れるか確認し、作れる場合は使用する材料を返す\nfunction tryMakeCharcoal(stock) {\n    let availableMaterials = [];\n    // 利用可能な材料とその数量を集計\n    for(const materialCode in stock){\n        const materialStock = stock[materialCode];\n        const totalQuantity = Object.values(materialStock).reduce((sum, qty)=>sum + qty, 0);\n        if (totalQuantity >= 1) {\n            availableMaterials.push({\n                code: materialCode,\n                quantity: totalQuantity\n            });\n        }\n    }\n    // 2種類以上の材料がない場合は炭を作れない\n    if (availableMaterials.length < 2) {\n        return null;\n    }\n    // 材料の組み合わせを作成\n    const combinations = [];\n    const usedIngredients = {};\n    // 最初の2つの材料を使用して炭を作る\n    const material1 = availableMaterials[0];\n    const material2 = availableMaterials[1];\n    // 両方の材料の最小値を取得（これが作れる炭の数）\n    const charcoalCount = Math.min(material1.quantity, material2.quantity);\n    combinations.push({\n        materials: [\n            material1.code,\n            material2.code\n        ],\n        count: charcoalCount\n    });\n    usedIngredients[material1.code] = charcoalCount;\n    usedIngredients[material2.code] = charcoalCount;\n    return {\n        usedIngredients: usedIngredients,\n        combinations\n    };\n}\nfunction canMake(stock, ingredients) {\n    for(const materialCode in ingredients){\n        const requiredAmount = parseInt(ingredients[materialCode]) || 0;\n        if (requiredAmount > 0) {\n            const materialStock = stock[materialCode];\n            if (!materialStock) {\n                console.log(\"Material not found in stock:\", materialCode);\n                return false;\n            }\n            const availableQuantity = Object.values(materialStock).reduce((sum, qty)=>sum + qty, 0);\n            if (availableQuantity < requiredAmount) {\n                console.log(\"Not enough material:\", materialCode, \"Required:\", requiredAmount, \"Available:\", availableQuantity);\n                return false;\n            }\n        }\n    }\n    return true;\n}\nfunction useIngredients(stock, ingredients) {\n    for(const materialKey in ingredients){\n        const requiredAmount = ingredients[materialKey] || 0;\n        if (requiredAmount > 0) {\n            let remainingAmount = requiredAmount;\n            const materialStock = stock[materialKey];\n            if (materialStock) {\n                for(const quality in qualityPoints){\n                    const qualityKey = quality;\n                    const availableQuantity = materialStock[qualityKey];\n                    const usedQuantity = Math.min(availableQuantity, remainingAmount);\n                    materialStock[qualityKey] -= usedQuantity;\n                    remainingAmount -= usedQuantity;\n                    if (remainingAmount <= 0) break;\n                }\n            }\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxJQUFJUyxpQkFBaUIsR0FBRztZQUN0QixNQUFNVixnQkFBZ0J6QyxLQUFLLENBQUMwQyxhQUF5QjtZQUNyRCxJQUFJLENBQUNELGVBQWU7Z0JBQ2xCbEQsUUFBUUMsR0FBRyxDQUFDLGdDQUFnQ2tEO2dCQUM1QyxPQUFPO1lBQ1Q7WUFDQSxNQUFNYyxvQkFBb0JjLE9BQU9DLE1BQU0sQ0FBQzlCLGVBQWV1QixNQUFNLENBQUMsQ0FBQ0MsS0FBS08sTUFBUVAsTUFBTU8sS0FBSztZQUN2RixJQUFJaEIsb0JBQW9CTCxnQkFBZ0I7Z0JBQ3RDNUQsUUFBUUMsR0FBRyxDQUFDLHdCQUF3QmtELGNBQWMsYUFBYVMsZ0JBQWdCLGNBQWNLO2dCQUM3RixPQUFPO1lBQ1Q7UUFDRjtJQUNGO0lBQ0EsT0FBTztBQUNUO0FBRUEsU0FBU2xCLGVBQWV0QyxLQUFZLEVBQUVVLFdBQWtDO0lBQ3RFLElBQUssTUFBTW9FLGVBQWVwRSxZQUFhO1FBQ3JDLE1BQU15QyxpQkFBaUJ6QyxXQUFXLENBQUNvRSxZQUFZLElBQUk7UUFDbkQsSUFBSTNCLGlCQUFpQixHQUFHO1lBQ3RCLElBQUlFLGtCQUFrQkY7WUFDdEIsTUFBTVYsZ0JBQWdCekMsS0FBSyxDQUFDOEUsWUFBd0I7WUFDcEQsSUFBSXJDLGVBQWU7Z0JBQ2pCLElBQUssTUFBTWMsV0FBV3RGLGNBQWU7b0JBQ25DLE1BQU04RyxhQUFheEI7b0JBQ25CLE1BQU1DLG9CQUFvQmYsYUFBYSxDQUFDc0MsV0FBVztvQkFDbkQsTUFBTXRCLGVBQWVDLEtBQUtDLEdBQUcsQ0FBQ0gsbUJBQW1CSDtvQkFDakRaLGFBQWEsQ0FBQ3NDLFdBQVcsSUFBSXRCO29CQUM3QkosbUJBQW1CSTtvQkFDbkIsSUFBSUosbUJBQW1CLEdBQUc7Z0JBQzVCO1lBQ0Y7UUFDRjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90d3N0X21jX2NhbGMvLi9wYWdlcy9hcGkvY2FsY3VsYXRlLW1lZGFscy50cz82NmJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tICduZXh0JztcbmltcG9ydCB7IFJlY2lwZSB9IGZyb20gJ0AvZGF0YS9yZWNpcGVzJztcbmltcG9ydCB7IGdldFNoZWV0RGF0YSB9IGZyb20gJ0AvbGliL2dvb2dsZVNoZWV0cyc7XG5pbXBvcnQgeyBtYXRlcmlhbHMgfSBmcm9tICdAL2RhdGEvbWF0ZXJpYWxzJztcblxudHlwZSBNYXRlcmlhbCA9IHR5cGVvZiBtYXRlcmlhbHNbbnVtYmVyXVsnY29kZSddO1xudHlwZSBRdWFsaXR5ID0gJ2hpZ2gnIHwgJ21lZGl1bScgfCAnbG93JztcblxudHlwZSBTdG9jayA9IHtcbiAgW0sgaW4gTWF0ZXJpYWxdOiB7XG4gICAgW1EgaW4gUXVhbGl0eV06IG51bWJlcjtcbiAgfTtcbn07XG5cbmNvbnN0IHF1YWxpdHlQb2ludHM6IHsgW0sgaW4gUXVhbGl0eV06IG51bWJlciB9ID0ge1xuICBoaWdoOiAzMCxcbiAgbWVkaXVtOiAyMCxcbiAgbG93OiAxMCxcbn07XG5cbi8vIOWvqeafu+WToeOBruipleS+oeWfuua6luOCkuWumue+qVxudHlwZSBKdWRnZVR5cGUgPSAnZ2VuZXJvdXMnIHwgJ3NsaWdodGx5X2dlbmVyb3VzJyB8ICdub3JtYWwnIHwgJ3N0cmljdCc7XG5cbmludGVyZmFjZSBKdWRnZSB7XG4gIHR5cGU6IEp1ZGdlVHlwZTtcbiAgZXZhbHVhdGU6IChhdmVyYWdlUG9pbnRzOiBudW1iZXIpID0+IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIEp1ZGdlQ29uZmlnIHtcbiAgc3RyaWN0bmVzczogSnVkZ2VUeXBlO1xuICBudW1iZXI6IG51bWJlcjtcbn1cblxuLy8gc3RyaWN0bmVzc+OBruaVsOWApOOCkuipleS+oeOCv+OCpOODl+OBq+WkieaPm+OBmeOCi+mWouaVsFxuZnVuY3Rpb24gZ2V0SnVkZ2VUeXBlKHN0cmljdG5lc3M6IG51bWJlcik6IEp1ZGdlVHlwZSB7XG4gIHN3aXRjaCAoc3RyaWN0bmVzcykge1xuICAgIGNhc2UgMTpcbiAgICAgIHJldHVybiAnZ2VuZXJvdXMnO1xuICAgIGNhc2UgMjpcbiAgICAgIHJldHVybiAnc2xpZ2h0bHlfZ2VuZXJvdXMnO1xuICAgIGNhc2UgMzpcbiAgICAgIHJldHVybiAnbm9ybWFsJztcbiAgICBjYXNlIDQ6XG4gICAgICByZXR1cm4gJ3N0cmljdCc7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiAnbm9ybWFsJztcbiAgfVxufVxuXG4vLyBqdWRnZXPphY3liJfjgpLli5XnmoTjgavnlJ/miJDjgZnjgovplqLmlbBcbmFzeW5jIGZ1bmN0aW9uIGdldEp1ZGdlcygpOiBQcm9taXNlPEp1ZGdlW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBqdWRnZUNvbmZpZ3MgPSBhd2FpdCBnZXRTaGVldERhdGEoJ0p1ZGdlcycpO1xuICAgIGNvbnN0IGp1ZGdlczogSnVkZ2VbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBjb25maWcgb2YganVkZ2VDb25maWdzKSB7XG4gICAgICBjb25zdCBjb3VudCA9IHBhcnNlSW50KGNvbmZpZy5udW1iZXIudG9TdHJpbmcoKSk7XG4gICAgICBjb25zdCBzdHJpY3RuZXNzID0gcGFyc2VJbnQoY29uZmlnLnN0cmljdG5lc3MudG9TdHJpbmcoKSk7XG4gICAgICBpZiAoaXNOYU4oY291bnQpIHx8IGlzTmFOKHN0cmljdG5lc3MpKSBjb250aW51ZTtcblxuICAgICAgY29uc3QganVkZ2VUeXBlID0gZ2V0SnVkZ2VUeXBlKHN0cmljdG5lc3MpO1xuICAgICAgY29uc3QganVkZ2U6IEp1ZGdlID0ge1xuICAgICAgICB0eXBlOiBqdWRnZVR5cGUsXG4gICAgICAgIGV2YWx1YXRlOiAoYXZnKSA9PiB7XG4gICAgICAgICAgc3dpdGNoIChqdWRnZVR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2dlbmVyb3VzJzpcbiAgICAgICAgICAgICAgaWYgKGF2ZyA+PSAxNikgcmV0dXJuIDEwO1xuICAgICAgICAgICAgICBpZiAoYXZnID09PSAxNSkgcmV0dXJuIDk7XG4gICAgICAgICAgICAgIGlmIChhdmcgPj0gMTEpIHJldHVybiA4O1xuICAgICAgICAgICAgICBpZiAoYXZnID09PSAxMCkgcmV0dXJuIDc7XG4gICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgY2FzZSAnc2xpZ2h0bHlfZ2VuZXJvdXMnOlxuICAgICAgICAgICAgICBpZiAoYXZnID49IDIwKSByZXR1cm4gMTA7XG4gICAgICAgICAgICAgIGlmIChhdmcgPj0gMTYpIHJldHVybiA5O1xuICAgICAgICAgICAgICBpZiAoYXZnID09PSAxNSkgcmV0dXJuIDg7XG4gICAgICAgICAgICAgIGlmIChhdmcgPj0gMTEpIHJldHVybiA3O1xuICAgICAgICAgICAgICBpZiAoYXZnID09PSAxMCkgcmV0dXJuIDY7XG4gICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgY2FzZSAnbm9ybWFsJzpcbiAgICAgICAgICAgICAgaWYgKGF2ZyA+PSAyMSkgcmV0dXJuIDEwO1xuICAgICAgICAgICAgICBpZiAoYXZnID09PSAyMCkgcmV0dXJuIDk7XG4gICAgICAgICAgICAgIGlmIChhdmcgPj0gMTYpIHJldHVybiA4O1xuICAgICAgICAgICAgICBpZiAoYXZnID09PSAxNSkgcmV0dXJuIDc7XG4gICAgICAgICAgICAgIGlmIChhdmcgPj0gMTEpIHJldHVybiA2O1xuICAgICAgICAgICAgICBpZiAoYXZnID09PSAxMCkgcmV0dXJuIDU7XG4gICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgY2FzZSAnc3RyaWN0JzpcbiAgICAgICAgICAgICAgaWYgKGF2ZyA+PSAyNikgcmV0dXJuIDEwO1xuICAgICAgICAgICAgICBpZiAoYXZnID09PSAyNSkgcmV0dXJuIDk7XG4gICAgICAgICAgICAgIGlmIChhdmcgPj0gMjEpIHJldHVybiA4O1xuICAgICAgICAgICAgICBpZiAoYXZnID09PSAyMCkgcmV0dXJuIDc7XG4gICAgICAgICAgICAgIGlmIChhdmcgPj0gMTYpIHJldHVybiA2O1xuICAgICAgICAgICAgICBpZiAoYXZnID09PSAxNSkgcmV0dXJuIDU7XG4gICAgICAgICAgICAgIGlmIChhdmcgPj0gMTEpIHJldHVybiA0O1xuICAgICAgICAgICAgICBpZiAoYXZnID09PSAxMCkgcmV0dXJuIDM7XG4gICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgcmV0dXJuIDM7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyDmjIflrprjgZXjgozjgZ/mlbDjgaDjgZFqdWRnZeOCkui/veWKoFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgIGp1ZGdlcy5wdXNoKGp1ZGdlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnTG9hZGVkIGp1ZGdlczonLCBqdWRnZXMubWFwKGogPT4gai50eXBlKSk7XG4gICAgcmV0dXJuIGp1ZGdlcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIGp1ZGdlczonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuaW50ZXJmYWNlIENoYXJjb2FsUmVzdWx0IHtcbiAgdXNlZEluZ3JlZGllbnRzOiB7IFtrZXkgaW4gTWF0ZXJpYWxdOiBudW1iZXIgfTtcbiAgY29tYmluYXRpb25zOiB7IG1hdGVyaWFsczogW01hdGVyaWFsLCBNYXRlcmlhbF0sIGNvdW50OiBudW1iZXIgfVtdO1xufVxuXG5pbnRlcmZhY2UgVXNlZE1hdGVyaWFsRGV0YWlsIHtcbiAgbWF0ZXJpYWxDb2RlOiBNYXRlcmlhbDtcbiAgaGlnaDogbnVtYmVyO1xuICBtZWRpdW06IG51bWJlcjtcbiAgbG93OiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBSZWNpcGVEZXRhaWwge1xuICByZWNpcGVOYW1lOiBzdHJpbmc7XG4gIGNvdW50OiBudW1iZXI7XG4gIG1hdGVyaWFsczogVXNlZE1hdGVyaWFsRGV0YWlsW107XG4gIG1lZGFsczogbnVtYmVyO1xuICBtYWRvbHM6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIFBhcnNlZFJlY2lwZSBleHRlbmRzIFJlY2lwZSB7XG4gIGluZ3JlZGllbnRzOiB7IFtrZXkgaW4gTWF0ZXJpYWxdOiBudW1iZXIgfTtcbn1cblxuLy8gQVBJ44OP44Oz44OJ44Op44O844KS6Z2e5ZCM5pyf6Zai5pWw44Gr5aSJ5pu0XG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKFxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxuICByZXM6IE5leHRBcGlSZXNwb25zZVxuKSB7XG4gIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBzdG9jaywgcmVjaXBlcyB9ID0gcmVxLmJvZHk7XG4gICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgcmVxdWVzdDonLCBKU09OLnN0cmluZ2lmeSh7IHN0b2NrLCByZWNpcGVzIH0sIG51bGwsIDIpKTtcblxuICAgICAgaWYgKCFzdG9jayB8fCAhcmVjaXBlcyB8fCAhQXJyYXkuaXNBcnJheShyZWNpcGVzKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaW5wdXQgZGF0YScpO1xuICAgICAgfVxuXG4gICAgICAvLyDlr6nmn7vlk6Hjga7mp4vmiJDjgpLoqq3jgb/ovrzjgoBcbiAgICAgIGNvbnN0IGp1ZGdlcyA9IGF3YWl0IGdldEp1ZGdlcygpO1xuICAgICAgXG4gICAgICAvLyDjg6zjgrfjg5Tjga4gaW5ncmVkaWVudHMg44KS6Kej5p6QXG4gICAgICBjb25zdCBwYXJzZWRSZWNpcGVzID0gcmVjaXBlcy5tYXAocmVjaXBlID0+ICh7XG4gICAgICAgIC4uLnJlY2lwZSxcbiAgICAgICAgaW5ncmVkaWVudHM6IEpTT04ucGFyc2UocmVjaXBlLmluZ3JlZGllbnRzKSxcbiAgICAgICAgbWFkb2xzOiBwYXJzZUludChyZWNpcGUubWFkb2xzKVxuICAgICAgfSkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBjYWxjdWxhdGVPcHRpbWFsUmVjaXBlcyhzdG9jaywgcGFyc2VkUmVjaXBlcywganVkZ2VzKTtcbiAgICAgIGNvbnNvbGUubG9nKCdDYWxjdWxhdGlvbiByZXN1bHQ6JywgSlNPTi5zdHJpbmdpZnkocmVzdWx0LCBudWxsLCAyKSk7XG5cbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHJlc3VsdCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGNhbGN1bGF0ZS1tZWRhbHM6JywgZXJyb3IpO1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIFNlcnZlciBFcnJvcicsIGRldGFpbHM6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InIH0pO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXMuc3RhdHVzKDQwNSkuZW5kKCk7XG4gIH1cbn1cblxuLy8gY2FsY3VsYXRlT3B0aW1hbFJlY2lwZXPplqLmlbDjgpLkv67mraPjgZfjgaYganVkZ2VzIOOCkuW8leaVsOOBqOOBl+OBpuWPl+OBkeWPluOCi1xuZnVuY3Rpb24gY2FsY3VsYXRlT3B0aW1hbFJlY2lwZXMoXG4gIHN0b2NrOiBTdG9jaywgXG4gIHJlY2lwZXM6IFBhcnNlZFJlY2lwZVtdLCBcbiAganVkZ2VzOiBKdWRnZVtdXG4pOiB7XG4gIHJlY2lwZXM6IHsgW25hbWU6IHN0cmluZ106IG51bWJlciB9O1xuICBtZWRhbHM6IG51bWJlcjtcbiAgbWFkb2xzOiBudW1iZXI7XG4gIGNoYXJjb2FsRGV0YWlscz86IHsgbWF0ZXJpYWxzOiBbTWF0ZXJpYWwsIE1hdGVyaWFsXSwgY291bnQ6IG51bWJlciB9W107XG4gIHJlY2lwZURldGFpbHM6IFJlY2lwZURldGFpbFtdO1xufSB7XG4gIGxldCBvcHRpbWFsUmVjaXBlczogeyBbbmFtZTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fTtcbiAgbGV0IHRvdGFsTWVkYWxzID0gMDtcbiAgbGV0IHRvdGFsTWFkb2xzID0gMDtcbiAgbGV0IGNoYXJjb2FsRGV0YWlsczogeyBtYXRlcmlhbHM6IFtNYXRlcmlhbCwgTWF0ZXJpYWxdLCBjb3VudDogbnVtYmVyIH1bXSA9IFtdO1xuICBsZXQgcmVjaXBlRGV0YWlsczogUmVjaXBlRGV0YWlsW10gPSBbXTtcbiAgbGV0IGN1cnJlbnRTdG9jayA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3RvY2spKSBhcyBTdG9jaztcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIGxldCBiZXN0UmVjaXBlOiBhbnkgfCBudWxsID0gbnVsbDtcbiAgICBsZXQgYmVzdE1lZGFscyA9IDA7XG4gICAgbGV0IGJlc3RVc2VkTWF0ZXJpYWxzOiBVc2VkTWF0ZXJpYWxEZXRhaWxbXSB8IG51bGwgPSBudWxsO1xuXG4gICAgLy8g6YCa5bi444Gu44K344OU44KS6Kmm44GZXG4gICAgZm9yIChjb25zdCByZWNpcGUgb2YgcmVjaXBlcykge1xuICAgICAgaWYgKGNhbk1ha2UoY3VycmVudFN0b2NrLCByZWNpcGUuaW5ncmVkaWVudHMpKSB7XG4gICAgICAgIC8vIOWQhOODrOOCt+ODlOOBq+WvvuOBl+OBpuOAgeS9juWTgeizquWEquWFiOOBqOmrmOWTgeizquWEquWFiOOBruS4oeaWueOCkuippuOBmVxuICAgICAgICBjb25zdCBsb3dRdWFsaXR5Rmlyc3QgPSBzaW11bGF0ZVJlY2lwZShjdXJyZW50U3RvY2ssIHJlY2lwZSwgdHJ1ZSwganVkZ2VzKTtcbiAgICAgICAgY29uc3QgaGlnaFF1YWxpdHlGaXJzdCA9IHNpbXVsYXRlUmVjaXBlKGN1cnJlbnRTdG9jaywgcmVjaXBlLCBmYWxzZSwganVkZ2VzKTtcblxuICAgICAgICAvLyDjgojjgorlpJrjgY/jga7jg6Hjg4Djg6vjgYznjbLlvpfjgafjgY3jgovmlrnjgpLpgbjmip5cbiAgICAgICAgaWYgKGxvd1F1YWxpdHlGaXJzdC5tZWRhbHMgPiBiZXN0TWVkYWxzKSB7XG4gICAgICAgICAgYmVzdE1lZGFscyA9IGxvd1F1YWxpdHlGaXJzdC5tZWRhbHM7XG4gICAgICAgICAgYmVzdFJlY2lwZSA9IHJlY2lwZTtcbiAgICAgICAgICBiZXN0VXNlZE1hdGVyaWFscyA9IGxvd1F1YWxpdHlGaXJzdC5tYXRlcmlhbHM7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhpZ2hRdWFsaXR5Rmlyc3QubWVkYWxzID4gYmVzdE1lZGFscykge1xuICAgICAgICAgIGJlc3RNZWRhbHMgPSBoaWdoUXVhbGl0eUZpcnN0Lm1lZGFscztcbiAgICAgICAgICBiZXN0UmVjaXBlID0gcmVjaXBlO1xuICAgICAgICAgIGJlc3RVc2VkTWF0ZXJpYWxzID0gaGlnaFF1YWxpdHlGaXJzdC5tYXRlcmlhbHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDjg6zjgrfjg5TjgYzopovjgaTjgYvjgonjgarjgYTloLTlkIjjga/ngq3jgpLkvZzjgovlh6bnkIbvvIjml6LlrZjjga7jgrPjg4nvvIlcbiAgICBpZiAoYmVzdFJlY2lwZSA9PT0gbnVsbCkge1xuICAgICAgY29uc3QgY2hhcmNvYWxSZXN1bHQgPSB0cnlNYWtlQ2hhcmNvYWwoY3VycmVudFN0b2NrKTtcbiAgICAgIGlmIChjaGFyY29hbFJlc3VsdCkge1xuICAgICAgICBjb25zb2xlLmxvZygnTWFraW5nIGNoYXJjb2FsIHdpdGggcmVtYWluaW5nIG1hdGVyaWFscycpO1xuICAgICAgICBvcHRpbWFsUmVjaXBlc1sn54KtJ10gPSAob3B0aW1hbFJlY2lwZXNbJ+eCrSddIHx8IDApICsgY2hhcmNvYWxSZXN1bHQuY29tYmluYXRpb25zWzBdLmNvdW50O1xuICAgICAgICB0b3RhbE1lZGFscyArPSAzICogY2hhcmNvYWxSZXN1bHQuY29tYmluYXRpb25zWzBdLmNvdW50O1xuICAgICAgICB0b3RhbE1hZG9scyArPSAzNTAgKiBjaGFyY29hbFJlc3VsdC5jb21iaW5hdGlvbnNbMF0uY291bnQ7XG4gICAgICAgIGNoYXJjb2FsRGV0YWlscy5wdXNoKC4uLmNoYXJjb2FsUmVzdWx0LmNvbWJpbmF0aW9ucyk7XG4gICAgICAgIHVzZUluZ3JlZGllbnRzKGN1cnJlbnRTdG9jaywgY2hhcmNvYWxSZXN1bHQudXNlZEluZ3JlZGllbnRzKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyDpgbjmip7jgZXjgozjgZ/jg6zjgrfjg5Tjga7lrp/ooYxcbiAgICBpZiAoYmVzdFVzZWRNYXRlcmlhbHMpIHtcbiAgICAgIC8vIOS9v+eUqOOBmeOCi+adkOaWmeOCkuWcqOW6q+OBi+OCiea4m+OCieOBmVxuICAgICAgZm9yIChjb25zdCBtYXRlcmlhbCBvZiBiZXN0VXNlZE1hdGVyaWFscykge1xuICAgICAgICBjb25zdCBtYXRlcmlhbFN0b2NrID0gY3VycmVudFN0b2NrW21hdGVyaWFsLm1hdGVyaWFsQ29kZSBhcyBNYXRlcmlhbF07XG4gICAgICAgIGlmIChtYXRlcmlhbFN0b2NrKSB7XG4gICAgICAgICAgbWF0ZXJpYWxTdG9jay5oaWdoIC09IG1hdGVyaWFsLmhpZ2g7XG4gICAgICAgICAgbWF0ZXJpYWxTdG9jay5tZWRpdW0gLT0gbWF0ZXJpYWwubWVkaXVtO1xuICAgICAgICAgIG1hdGVyaWFsU3RvY2subG93IC09IG1hdGVyaWFsLmxvdztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZWNpcGVEZXRhaWxzLnB1c2goe1xuICAgICAgICByZWNpcGVOYW1lOiBiZXN0UmVjaXBlLm5hbWUsXG4gICAgICAgIGNvdW50OiAxLFxuICAgICAgICBtYXRlcmlhbHM6IGJlc3RVc2VkTWF0ZXJpYWxzLFxuICAgICAgICBtZWRhbHM6IGJlc3RNZWRhbHMsXG4gICAgICAgIG1hZG9sczogYmVzdFJlY2lwZS5tYWRvbHNcbiAgICAgIH0pO1xuXG4gICAgICBvcHRpbWFsUmVjaXBlc1tiZXN0UmVjaXBlLm5hbWVdID0gKG9wdGltYWxSZWNpcGVzW2Jlc3RSZWNpcGUubmFtZV0gfHwgMCkgKyAxO1xuICAgICAgdG90YWxNZWRhbHMgKz0gYmVzdE1lZGFscztcbiAgICAgIHRvdGFsTWFkb2xzICs9IGJlc3RSZWNpcGUubWFkb2xzO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7IFxuICAgIHJlY2lwZXM6IG9wdGltYWxSZWNpcGVzLCBcbiAgICBtZWRhbHM6IHRvdGFsTWVkYWxzLCBcbiAgICBtYWRvbHM6IHRvdGFsTWFkb2xzLFxuICAgIGNoYXJjb2FsRGV0YWlsczogY2hhcmNvYWxEZXRhaWxzLmxlbmd0aCA+IDAgPyBjaGFyY29hbERldGFpbHMgOiB1bmRlZmluZWQsXG4gICAgcmVjaXBlRGV0YWlsc1xuICB9O1xufVxuXG4vLyBzaW11bGF0ZVJlY2lwZemWouaVsOOCkuS/ruato+OBl+OBpiBqdWRnZXMg44KS5byV5pWw44Go44GX44Gm5Y+X44GR5Y+W44KLXG5mdW5jdGlvbiBzaW11bGF0ZVJlY2lwZShcbiAgc3RvY2s6IFN0b2NrLFxuICByZWNpcGU6IGFueSxcbiAgbG93UXVhbGl0eUZpcnN0OiBib29sZWFuLFxuICBqdWRnZXM6IEp1ZGdlW11cbik6IHsgbWVkYWxzOiBudW1iZXIsIG1hdGVyaWFsczogVXNlZE1hdGVyaWFsRGV0YWlsW10gfSB7XG4gIGNvbnN0IHRlbXBTdG9jayA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3RvY2spKTtcbiAgY29uc3QgdXNlZE1hdGVyaWFsczogVXNlZE1hdGVyaWFsRGV0YWlsW10gPSBbXTtcbiAgbGV0IHRvdGFsUG9pbnRzID0gMDtcbiAgbGV0IHRvdGFsSW5ncmVkaWVudHMgPSAwO1xuXG4gIGZvciAoY29uc3QgbWF0ZXJpYWxDb2RlIGluIHJlY2lwZS5pbmdyZWRpZW50cykge1xuICAgIGNvbnN0IHJlcXVpcmVkQW1vdW50ID0gcmVjaXBlLmluZ3JlZGllbnRzW21hdGVyaWFsQ29kZV07XG4gICAgaWYgKHJlcXVpcmVkQW1vdW50ID4gMCkge1xuICAgICAgY29uc3QgbWF0ZXJpYWxTdG9jayA9IHRlbXBTdG9ja1ttYXRlcmlhbENvZGUgYXMgTWF0ZXJpYWxdO1xuICAgICAgY29uc3QgZGV0YWlsOiBVc2VkTWF0ZXJpYWxEZXRhaWwgPSB7XG4gICAgICAgIG1hdGVyaWFsQ29kZSxcbiAgICAgICAgaGlnaDogMCxcbiAgICAgICAgbWVkaXVtOiAwLFxuICAgICAgICBsb3c6IDBcbiAgICAgIH07XG5cbiAgICAgIGxldCByZW1haW5pbmdBbW91bnQgPSByZXF1aXJlZEFtb3VudDtcbiAgICAgIGNvbnN0IHF1YWxpdGllcyA9IGxvd1F1YWxpdHlGaXJzdCBcbiAgICAgICAgPyBbJ2xvdycsICdtZWRpdW0nLCAnaGlnaCddIGFzIFF1YWxpdHlbXVxuICAgICAgICA6IFsnaGlnaCcsICdtZWRpdW0nLCAnbG93J10gYXMgUXVhbGl0eVtdO1xuXG4gICAgICBmb3IgKGNvbnN0IHF1YWxpdHkgb2YgcXVhbGl0aWVzKSB7XG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVF1YW50aXR5ID0gbWF0ZXJpYWxTdG9ja1txdWFsaXR5XTtcbiAgICAgICAgY29uc3QgdXNlZFF1YW50aXR5ID0gTWF0aC5taW4oYXZhaWxhYmxlUXVhbnRpdHksIHJlbWFpbmluZ0Ftb3VudCk7XG4gICAgICAgIGRldGFpbFtxdWFsaXR5XSA9IHVzZWRRdWFudGl0eTtcbiAgICAgICAgdG90YWxQb2ludHMgKz0gcXVhbGl0eVBvaW50c1txdWFsaXR5XSAqIHVzZWRRdWFudGl0eTtcbiAgICAgICAgcmVtYWluaW5nQW1vdW50IC09IHVzZWRRdWFudGl0eTtcbiAgICAgICAgaWYgKHJlbWFpbmluZ0Ftb3VudCA8PSAwKSBicmVhaztcbiAgICAgIH1cblxuICAgICAgdG90YWxJbmdyZWRpZW50cyArPSByZXF1aXJlZEFtb3VudDtcbiAgICAgIHVzZWRNYXRlcmlhbHMucHVzaChkZXRhaWwpO1xuICAgIH1cbiAgfVxuXG4gIGNvbnN0IGF2ZXJhZ2VQb2ludHMgPSBNYXRoLmZsb29yKHRvdGFsUG9pbnRzIC8gdG90YWxJbmdyZWRpZW50cyk7XG4gIGNvbnN0IGFsbEp1ZGdlc1BvaW50cyA9IGp1ZGdlcy5tYXAoanVkZ2UgPT4ganVkZ2UuZXZhbHVhdGUoYXZlcmFnZVBvaW50cykpO1xuICBjb25zdCB0b3RhbFNjb3JlID0gYWxsSnVkZ2VzUG9pbnRzLnJlZHVjZSgoc3VtLCBwb2ludHMpID0+IHN1bSArIHBvaW50cywgMCk7XG4gIGNvbnN0IG1lZGFscyA9IE1hdGgubWF4KE1hdGguZmxvb3IoKHRvdGFsU2NvcmUgKiAzMCkgLyAxMDApLCAzKTtcblxuICByZXR1cm4geyBtZWRhbHMsIG1hdGVyaWFsczogdXNlZE1hdGVyaWFscyB9O1xufVxuXG4vLyDngq3jgpLkvZzjgozjgovjgYvnorroqo3jgZfjgIHkvZzjgozjgovloLTlkIjjga/kvb/nlKjjgZnjgovmnZDmlpnjgpLov5TjgZlcbmZ1bmN0aW9uIHRyeU1ha2VDaGFyY29hbChzdG9jazogU3RvY2spOiBDaGFyY29hbFJlc3VsdCB8IG51bGwge1xuICBsZXQgYXZhaWxhYmxlTWF0ZXJpYWxzOiB7IGNvZGU6IE1hdGVyaWFsLCBxdWFudGl0eTogbnVtYmVyIH1bXSA9IFtdO1xuXG4gIC8vIOWIqeeUqOWPr+iDveOBquadkOaWmeOBqOOBneOBruaVsOmHj+OCkumbhuioiFxuICBmb3IgKGNvbnN0IG1hdGVyaWFsQ29kZSBpbiBzdG9jaykge1xuICAgIGNvbnN0IG1hdGVyaWFsU3RvY2sgPSBzdG9ja1ttYXRlcmlhbENvZGUgYXMgTWF0ZXJpYWxdO1xuICAgIGNvbnN0IHRvdGFsUXVhbnRpdHkgPSBPYmplY3QudmFsdWVzKG1hdGVyaWFsU3RvY2spLnJlZHVjZShcbiAgICAgIChzdW0sIHF0eSkgPT4gc3VtICsgcXR5LFxuICAgICAgMFxuICAgICk7XG4gICAgaWYgKHRvdGFsUXVhbnRpdHkgPj0gMSkge1xuICAgICAgYXZhaWxhYmxlTWF0ZXJpYWxzLnB1c2goeyBcbiAgICAgICAgY29kZTogbWF0ZXJpYWxDb2RlIGFzIE1hdGVyaWFsLCBcbiAgICAgICAgcXVhbnRpdHk6IHRvdGFsUXVhbnRpdHkgXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyAy56iu6aGe5Lul5LiK44Gu5p2Q5paZ44GM44Gq44GE5aC05ZCI44Gv54Kt44KS5L2c44KM44Gq44GEXG4gIGlmIChhdmFpbGFibGVNYXRlcmlhbHMubGVuZ3RoIDwgMikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8g5p2Q5paZ44Gu57WE44G/5ZCI44KP44Gb44KS5L2c5oiQXG4gIGNvbnN0IGNvbWJpbmF0aW9uczogeyBtYXRlcmlhbHM6IFtNYXRlcmlhbCwgTWF0ZXJpYWxdLCBjb3VudDogbnVtYmVyIH1bXSA9IFtdO1xuICBjb25zdCB1c2VkSW5ncmVkaWVudHM6IHsgW2tleSBpbiBNYXRlcmlhbF0/OiBudW1iZXIgfSA9IHt9O1xuXG4gIC8vIOacgOWIneOBrjLjgaTjga7mnZDmlpnjgpLkvb/nlKjjgZfjgabngq3jgpLkvZzjgotcbiAgY29uc3QgbWF0ZXJpYWwxID0gYXZhaWxhYmxlTWF0ZXJpYWxzWzBdO1xuICBjb25zdCBtYXRlcmlhbDIgPSBhdmFpbGFibGVNYXRlcmlhbHNbMV07XG4gIFxuICAvLyDkuKHmlrnjga7mnZDmlpnjga7mnIDlsI/lgKTjgpLlj5blvpfvvIjjgZPjgozjgYzkvZzjgozjgovngq3jga7mlbDvvIlcbiAgY29uc3QgY2hhcmNvYWxDb3VudCA9IE1hdGgubWluKG1hdGVyaWFsMS5xdWFudGl0eSwgbWF0ZXJpYWwyLnF1YW50aXR5KTtcbiAgXG4gIGNvbWJpbmF0aW9ucy5wdXNoKHtcbiAgICBtYXRlcmlhbHM6IFttYXRlcmlhbDEuY29kZSwgbWF0ZXJpYWwyLmNvZGVdLFxuICAgIGNvdW50OiBjaGFyY29hbENvdW50XG4gIH0pO1xuXG4gIHVzZWRJbmdyZWRpZW50c1ttYXRlcmlhbDEuY29kZV0gPSBjaGFyY29hbENvdW50O1xuICB1c2VkSW5ncmVkaWVudHNbbWF0ZXJpYWwyLmNvZGVdID0gY2hhcmNvYWxDb3VudDtcblxuICByZXR1cm4geyBcbiAgICB1c2VkSW5ncmVkaWVudHM6IHVzZWRJbmdyZWRpZW50cyBhcyB7IFtrZXk6IHN0cmluZ106IG51bWJlciB9LCBcbiAgICBjb21iaW5hdGlvbnMgXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNhbk1ha2Uoc3RvY2s6IFN0b2NrLCBpbmdyZWRpZW50czogYW55KTogYm9vbGVhbiB7XG4gIGZvciAoY29uc3QgbWF0ZXJpYWxDb2RlIGluIGluZ3JlZGllbnRzKSB7XG4gICAgY29uc3QgcmVxdWlyZWRBbW91bnQgPSBwYXJzZUludChpbmdyZWRpZW50c1ttYXRlcmlhbENvZGVdKSB8fCAwO1xuICAgIGlmIChyZXF1aXJlZEFtb3VudCA+IDApIHtcbiAgICAgIGNvbnN0IG1hdGVyaWFsU3RvY2sgPSBzdG9ja1ttYXRlcmlhbENvZGUgYXMgTWF0ZXJpYWxdO1xuICAgICAgaWYgKCFtYXRlcmlhbFN0b2NrKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdNYXRlcmlhbCBub3QgZm91bmQgaW4gc3RvY2s6JywgbWF0ZXJpYWxDb2RlKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgY29uc3QgYXZhaWxhYmxlUXVhbnRpdHkgPSBPYmplY3QudmFsdWVzKG1hdGVyaWFsU3RvY2spLnJlZHVjZSgoc3VtLCBxdHkpID0+IHN1bSArIHF0eSwgMCk7XG4gICAgICBpZiAoYXZhaWxhYmxlUXVhbnRpdHkgPCByZXF1aXJlZEFtb3VudCkge1xuICAgICAgICBjb25zb2xlLmxvZygnTm90IGVub3VnaCBtYXRlcmlhbDonLCBtYXRlcmlhbENvZGUsICdSZXF1aXJlZDonLCByZXF1aXJlZEFtb3VudCwgJ0F2YWlsYWJsZTonLCBhdmFpbGFibGVRdWFudGl0eSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHVzZUluZ3JlZGllbnRzKHN0b2NrOiBTdG9jaywgaW5ncmVkaWVudHM6IFJlY2lwZVsnaW5ncmVkaWVudHMnXSk6IHZvaWQge1xuICBmb3IgKGNvbnN0IG1hdGVyaWFsS2V5IGluIGluZ3JlZGllbnRzKSB7XG4gICAgY29uc3QgcmVxdWlyZWRBbW91bnQgPSBpbmdyZWRpZW50c1ttYXRlcmlhbEtleV0gfHwgMDtcbiAgICBpZiAocmVxdWlyZWRBbW91bnQgPiAwKSB7XG4gICAgICBsZXQgcmVtYWluaW5nQW1vdW50ID0gcmVxdWlyZWRBbW91bnQ7XG4gICAgICBjb25zdCBtYXRlcmlhbFN0b2NrID0gc3RvY2tbbWF0ZXJpYWxLZXkgYXMgTWF0ZXJpYWxdO1xuICAgICAgaWYgKG1hdGVyaWFsU3RvY2spIHtcbiAgICAgICAgZm9yIChjb25zdCBxdWFsaXR5IGluIHF1YWxpdHlQb2ludHMpIHtcbiAgICAgICAgICBjb25zdCBxdWFsaXR5S2V5ID0gcXVhbGl0eSBhcyBRdWFsaXR5O1xuICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZVF1YW50aXR5ID0gbWF0ZXJpYWxTdG9ja1txdWFsaXR5S2V5XTtcbiAgICAgICAgICBjb25zdCB1c2VkUXVhbnRpdHkgPSBNYXRoLm1pbihhdmFpbGFibGVRdWFudGl0eSwgcmVtYWluaW5nQW1vdW50KTtcbiAgICAgICAgICBtYXRlcmlhbFN0b2NrW3F1YWxpdHlLZXldIC09IHVzZWRRdWFudGl0eTtcbiAgICAgICAgICByZW1haW5pbmdBbW91bnQgLT0gdXNlZFF1YW50aXR5O1xuICAgICAgICAgIGlmIChyZW1haW5pbmdBbW91bnQgPD0gMCkgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuIl0sIm5hbWVzIjpbImdldFNoZWV0RGF0YSIsInF1YWxpdHlQb2ludHMiLCJoaWdoIiwibWVkaXVtIiwibG93IiwiZ2V0SnVkZ2VUeXBlIiwic3RyaWN0bmVzcyIsImdldEp1ZGdlcyIsImp1ZGdlQ29uZmlncyIsImp1ZGdlcyIsImNvbmZpZyIsImNvdW50IiwicGFyc2VJbnQiLCJudW1iZXIiLCJ0b1N0cmluZyIsImlzTmFOIiwianVkZ2VUeXBlIiwianVkZ2UiLCJ0eXBlIiwiZXZhbHVhdGUiLCJhdmciLCJpIiwicHVzaCIsImNvbnNvbGUiLCJsb2ciLCJtYXAiLCJqIiwiZXJyb3IiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwic3RvY2siLCJyZWNpcGVzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJBcnJheSIsImlzQXJyYXkiLCJFcnJvciIsInBhcnNlZFJlY2lwZXMiLCJyZWNpcGUiLCJpbmdyZWRpZW50cyIsInBhcnNlIiwibWFkb2xzIiwicmVzdWx0IiwiY2FsY3VsYXRlT3B0aW1hbFJlY2lwZXMiLCJzdGF0dXMiLCJqc29uIiwiZGV0YWlscyIsIm1lc3NhZ2UiLCJlbmQiLCJvcHRpbWFsUmVjaXBlcyIsInRvdGFsTWVkYWxzIiwidG90YWxNYWRvbHMiLCJjaGFyY29hbERldGFpbHMiLCJyZWNpcGVEZXRhaWxzIiwiY3VycmVudFN0b2NrIiwiYmVzdFJlY2lwZSIsImJlc3RNZWRhbHMiLCJiZXN0VXNlZE1hdGVyaWFscyIsImNhbk1ha2UiLCJsb3dRdWFsaXR5Rmlyc3QiLCJzaW11bGF0ZVJlY2lwZSIsImhpZ2hRdWFsaXR5Rmlyc3QiLCJtZWRhbHMiLCJtYXRlcmlhbHMiLCJjaGFyY29hbFJlc3VsdCIsInRyeU1ha2VDaGFyY29hbCIsImNvbWJpbmF0aW9ucyIsInVzZUluZ3JlZGllbnRzIiwidXNlZEluZ3JlZGllbnRzIiwibWF0ZXJpYWwiLCJtYXRlcmlhbFN0b2NrIiwibWF0ZXJpYWxDb2RlIiwicmVjaXBlTmFtZSIsIm5hbWUiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJ0ZW1wU3RvY2siLCJ1c2VkTWF0ZXJpYWxzIiwidG90YWxQb2ludHMiLCJ0b3RhbEluZ3JlZGllbnRzIiwicmVxdWlyZWRBbW91bnQiLCJkZXRhaWwiLCJyZW1haW5pbmdBbW91bnQiLCJxdWFsaXRpZXMiLCJxdWFsaXR5IiwiYXZhaWxhYmxlUXVhbnRpdHkiLCJ1c2VkUXVhbnRpdHkiLCJNYXRoIiwibWluIiwiYXZlcmFnZVBvaW50cyIsImZsb29yIiwiYWxsSnVkZ2VzUG9pbnRzIiwidG90YWxTY29yZSIsInJlZHVjZSIsInN1bSIsInBvaW50cyIsIm1heCIsImF2YWlsYWJsZU1hdGVyaWFscyIsInRvdGFsUXVhbnRpdHkiLCJPYmplY3QiLCJ2YWx1ZXMiLCJxdHkiLCJjb2RlIiwicXVhbnRpdHkiLCJtYXRlcmlhbDEiLCJtYXRlcmlhbDIiLCJjaGFyY29hbENvdW50IiwibWF0ZXJpYWxLZXkiLCJxdWFsaXR5S2V5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/calculate-medals.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fcalculate-medals&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fcalculate-medals.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();